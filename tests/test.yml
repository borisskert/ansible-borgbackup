---
- hosts: test_machine
  become: yes

  roles:
    - role: setup-borgbackup
      private_working_directory: /srv/borgbackup
      repos:
        - repo_path: /mnt/borgbackups/etc-backups
          encryption_mode: repokey
          encryption_passphrase: "thi5 is-mY_p@5sphr4s3 for /etc"
          passphrase_filename: etc_passphrase.txt
          archives:
            - name: etc-archive
              compression_mode: lzma,4
              paths:
                - /etc
        - repo_path: /mnt/borgbackups/home-and-root-backups
          encryption_mode: repokey-blake2
          encryption_passphrase: "thi5 is-mY_p@5sphr4s3 for /home and /root"
          passphrase_filename: home_root_passphrase.txt
          archives:
            - name: home-archive
              compression_mode: none
              paths:
                - /home
            - name: root-archive
              compression_mode: none
              paths:
                - /root
        - repo_path: /mnt/borgbackups/opt-backups
          archives:
            - name: opt-archive
              compression_mode: none
              paths:
                - /opt
